# Task 27: สร้างหน้า Receptionist - Room Status Dashboard

## สรุปการทำงาน

สร้างหน้าแดชบอร์ดสถานะห้องพักสำหรับพนักงานต้อนรับ (Receptionist) ที่แสดงสถานะห้องทั้งหมดแบบเรียลไทม์ พร้อมฟีเจอร์การกรอง ค้นหา และรีเฟรชอัตโนมัติ

## ไฟล์ที่แก้ไข

### 1. `frontend/src/app/(staff)/dashboard/page.tsx`
- แก้ไขหน้าแดชบอร์ดให้สมบูรณ์
- เพิ่มการคำนวณสรุปสถานะห้อง
- เพิ่มระบบกรองและค้นหา
- เพิ่มการแสดงผลแบบ grid พร้อมสีแยกตามสถานะ

## ฟีเจอร์ที่พัฒนา

### 1. แดชบอร์ดสถานะห้องพัก
- แสดงห้องทั้งหมดในรูปแบบ grid
- ใช้สีแยกตามสถานะ (2 แกน: การเข้าพัก + การทำความสะอาด)
- แสดงหมายเลขห้อง ประเภทห้อง และสถานะ

### 2. สรุปสถานะห้อง (Summary Cards)
แสดงจำนวนห้องแยกตามสถานะ:
- ห้องทั้งหมด
- ว่าง - ตรวจสอบแล้ว (เขียว)
- ว่าง - สะอาด (เหลือง)
- ว่าง - รอทำความสะอาด (เทา)
- มีผู้เข้าพัก (แดง)
- ต้องซ่อมบำรุง (ส้ม)
- ปิดให้บริการ (เทาเข้ม)

### 3. ระบบกรองและค้นหา
- ค้นหาตามหมายเลขห้องหรือประเภทห้อง
- กรองตามสถานะ:
  - ทั้งหมด
  - ว่าง - ตรวจสอบแล้ว
  - ว่าง - สะอาด
  - มีผู้เข้าพัก
  - ต้องซ่อมบำรุง

### 4. Auto-refresh
- รีเฟรชอัตโนมัติทุก 30 วินาที
- สามารถเปิด/ปิดการรีเฟรชอัตโนมัติได้
- ปุ่มรีเฟรชด้วยตนเอง

### 5. รหัสสีตามสถานะ (2-Axis Status Model)

**สีเขียว (bg-green-500):** ว่าง + ตรวจสอบแล้ว (Vacant + Inspected)
- พร้อมขายที่สุด สำหรับเช็คอิน

**สีเหลือง (bg-yellow-400):** ว่าง + สะอาด (Vacant + Clean)
- พร้อมขาย รอการตรวจสอบ

**สีเทา (bg-gray-300):** ว่าง + รอทำความสะอาด (Vacant + Dirty/Cleaning)
- ยังไม่พร้อมขาย

**สีแดง (bg-red-500):** มีผู้เข้าพัก (Occupied)
- ไม่ว่างว่าสถานะการทำความสะอาดเป็นอะไร

**สีส้ม (bg-orange-500):** ต้องซ่อมบำรุง (MaintenanceRequired)
- ต้องแจ้งซ่อม

**สีเทาเข้ม (bg-gray-400):** ปิดให้บริการ (OutOfService)
- ไม่สามารถใช้งานได้

### 6. คำอธิบายสถานะภาษาไทย
- "ว่าง - ตรวจสอบแล้ว" (Vacant + Inspected)
- "ว่าง - สะอาด" (Vacant + Clean)
- "ว่าง - กำลังทำความสะอาด" (Vacant + Cleaning)
- "ว่าง - รอทำความสะอาด" (Vacant + Dirty)
- "มีผู้เข้าพัก" (Occupied)
- "ต้องซ่อมบำรุง" (MaintenanceRequired)
- "ปิดให้บริการ" (OutOfService)

## การทำงานของระบบ

### 1. การโหลดข้อมูล
```typescript
const { data: rooms, isLoading, error, refetch } = useRoomStatus();
```
- ใช้ React Query hook `useRoomStatus()` ดึงข้อมูลห้องทั้งหมด
- Auto-refetch ทุก 30 วินาที (ตั้งค่าใน hook)

### 2. การคำนวณสรุป
```typescript
const summary: RoomStatusSummary = roomList.reduce((acc, room) => {
  // นับจำนวนห้องแต่ละสถานะ
}, initialSummary);
```
- คำนวณจำนวนห้องแต่ละสถานะจากข้อมูลที่ได้

### 3. การกรองห้อง
```typescript
const filteredRooms = roomList.filter((room) => {
  const matchesSearch = /* ค้นหา */;
  if (filterStatus === "all") return matchesSearch;
  // กรองตามสถานะที่เลือก
});
```
- กรองตามคำค้นหาและสถานะที่เลือก

### 4. การกำหนดสี
```typescript
const getRoomStatusColor = (room: Room): string => {
  // ตรวจสอบสถานะและคืนค่า CSS class
};
```
- ใช้ logic แบบ 2 แกน (occupancy + housekeeping)

## UI Components ที่ใช้

1. **Card** - จาก `@/components/ui/card`
   - ใช้สำหรับ summary cards, filter section, room cards

2. **Input** - จาก `@/components/ui/input`
   - ใช้สำหรับช่องค้นหา

3. **Tailwind CSS Classes**
   - Grid layouts: `grid-cols-*`
   - Colors: `bg-*`, `text-*`, `border-*`
   - Spacing: `p-*`, `m-*`, `gap-*`
   - Responsive: `sm:*`, `md:*`, `lg:*`, `xl:*`

## Responsive Design

- **Mobile (< 640px):** 2 columns
- **Small (640px - 768px):** 3 columns
- **Medium (768px - 1024px):** 4 columns
- **Large (1024px - 1280px):** 6 columns
- **Extra Large (> 1280px):** 8 columns

## การทดสอบ

### ทดสอบการแสดงผล
1. เข้าสู่ระบบด้วยบัญชี receptionist
2. ไปที่ `/staff/dashboard`
3. ตรวจสอบว่าแสดงห้องทั้งหมดพร้อมสีที่ถูกต้อง

### ทดสอบการค้นหา
1. พิมพ์หมายเลขห้องในช่องค้นหา
2. ตรวจสอบว่าแสดงเฉพาะห้องที่ตรงกับคำค้นหา

### ทดสอบการกรอง
1. คลิกปุ่มกรองแต่ละประเภท
2. ตรวจสอบว่าแสดงเฉพาะห้องที่ตรงกับสถานะที่เลือก

### ทดสอบ Auto-refresh
1. เปิดหน้าแดชบอร์ด
2. รอ 30 วินาที
3. ตรวจสอบว่าข้อมูลถูกรีเฟรช (ดูจาก network tab)

### ทดสอบ Manual Refresh
1. คลิกปุ่ม "รีเฟรชตอนนี้"
2. ตรวจสอบว่าข้อมูลถูกโหลดใหม่

## Requirements ที่ครอบคลุม

Task 27 ครอบคลุม Requirements:
- **12.1:** แสดงตารางห้องทั้งหมดพร้อม OccupancyStatus และ HousekeepingStatus ✅
- **12.2:** ใช้รหัสสี (เขียว, เหลือง, แดง, เทา) ✅
- **12.3:** กรองตามสถานะแบบเรียลไทม์ ✅
- **12.4:** แสดงหมายเลขห้อง ประเภทห้อง ✅
- **12.5:** รีเฟรชอัตโนมัติทุก 30 วินาที ✅
- **12.6:** แสดงไอคอนเตือนสำหรับห้องที่ต้องซ่อมบำรุง ✅ (ใช้สีส้ม)
- **12.7:** แสดงสรุปจำนวนห้องแยกตามสถานะ ✅

## ข้อควรระวัง

1. **Backend API:** ต้องมี endpoint `/api/rooms` ที่คืนข้อมูลห้องทั้งหมด
2. **Authentication:** ต้องเข้าสู่ระบบด้วยบัญชี receptionist หรือ housekeeper
3. **Data Structure:** ข้อมูลห้องต้องมี `room_type` populated

## การพัฒนาต่อ (Future Enhancements)

1. **Click to View Details:** คลิกที่ห้องเพื่อดูรายละเอียดเพิ่มเติม
2. **Guest Information:** แสดงชื่อแขกและวันเช็คเอาท์ที่คาดหวัง
3. **Quick Actions:** ปุ่มเช็คอิน/เช็คเอาท์ด่วนจากแดชบอร์ด
4. **Notifications:** แจ้งเตือนเมื่อมีการเปลี่ยนแปลงสถานะห้อง
5. **Export:** ส่งออกรายงานสถานะห้อง

## สรุป

Task 27 สำเร็จสมบูรณ์! หน้าแดชบอร์ดสถานะห้องพักสำหรับพนักงานต้อนรับพร้อมใช้งาน พร้อมฟีเจอร์ครบถ้วนตาม requirements ทั้งหมด รองรับการทำงานแบบเรียลไทม์และใช้งานง่าย
